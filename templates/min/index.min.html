<!DOCTYPE html><html lang=it><head><meta charset=UTF-8><title>TuttoCarte.it</title><meta name=theme-color content=#1f2324><link rel=manifest href=/app.webmanifest><link rel=icon href=../static/assets/favicon.png><link rel=stylesheet href=../static/css/min/index.min.css><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Gioca con i tuoi amici a qualsiasi gioco di carte senza la necessitÃ  di avere un mazzo a portata di mano!"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Outfit&display=swap"><script src=https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/jquery-ui@1.13.2/dist/jquery-ui.min.js></script><script src=https://cdn.jsdelivr.net/npm/jquery-ui-touch-punch@0.2.3/jquery.ui.touch-punch.min.js></script><script src=https://cdn.jsdelivr.net/npm/socket.io@4.7.2/client-dist/socket.io.min.js></script><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")</script></head><body>{% if dealer == True %}<section id=start><div id=overlay><h1>TuttoCarte.it</h1><h5>FAI SCANNERIZZARE IL QR CODE</h5><img id=qrcode src="https://api.qrserver.com/v1/create-qr-code/?data=TuttoCarte.it/{{room}}" alt=qrcode><h5 id=copy>O CLICCALO PER COPIARE IL LINK</h5><button id=together>INIZIAMO!</button><div id=separator><hr><h6>OPPURE</h6><hr></div><button id=alone>SOLITARIO</button></div></section>{% endif %}<section id=table>{{ decks | safe }} <img id=fiche1 class="fiche clonable" src=static/assets/fiches/FICHE1.png alt=fiche> <img id=fiche2 class="fiche clonable" src=static/assets/fiches/FICHE2.png alt=fiche> <img id=fiche3 class="fiche clonable" src=static/assets/fiches/FICHE3.png alt=fiche> <img id=dealer class="fiche clonable" src=static/assets/fiches/DEALER.png alt=fiche></section><section id=hand><h3>MANO</h3><div></div></section><section><textarea id=shared_notes placeholder="Note condivise"></textarea><textarea id=personal_notes placeholder="Note personali"></textarea></section><script type=text/javascript>$(document).ready(function(){var t=!1;const n="{{room}}",a=io({transport:["websocket"]});a.on("connect",function(){a.emit("join",{room:n})}),a.on("table",function(t){$("#table").html(t.html)}),a.on("notes",function(t){$("#shared_notes").val(t.notes)}),$("#qrcode").click(function(){navigator.clipboard.writeText("TuttoCarte.it/"+n),$("#copy").text("COPIATO"),setTimeout(function(){$("#copy").text("O CLICCALO PER COPIARE IL LINK")},2e3)}),$("#together").click(function(){$("#start").remove(),a.emit("table",{room:n,html:$("#table").html()})}),$("#alone").click(function(){$("#start").remove(),$("#shared_notes").remove()}),$("#table").on("touchstart",".card",function(){$(this).draggable()}),$("#table").on("mouseenter",".card",function(){$(this).draggable()}),$("#table").on("touchstart",".fiche",function(){$(this).draggable({helper:function(){return $(this).hasClass("clonable")?$(this).clone().removeClass("clonable"):$(this)}})}),$("#table").on("mouseenter",".fiche",function(){$(this).draggable({helper:function(){return $(this).hasClass("clonable")?$(this).clone().removeClass("clonable"):$(this)}})}),$("#table").droppable({drop:function(){a.emit("table",{room:n,html:$("#table").html()})}}),$("#hand div").on("touchstart",".card",function(){$(this).draggable({axis:"x"})}),$("#hand div").on("mouseenter",".card",function(){$(this).draggable({axis:"x"})}),$(document).on("click",".card",function(){var s=$(this);if(event.ctrlKey||!0===t)s.prependTo("#hand div").css({position:"",top:"",left:""}),a.emit("table",{room:n,html:$("#table").html()});else{const e=s.attr("src");a.emit("draw",{room:n,id:s.attr("id")}),a.on("draw",function(t){t=t.card;e.endsWith("BACK.jpg")?e.startsWith("static/assets/decks/italian/")?s.attr("src",`static/assets/decks/italian/${t}.jpg`):e.startsWith("static/assets/decks/french1/")?s.attr("src",`static/assets/decks/french1/${t}.jpg`):e.startsWith("static/assets/decks/french2/")&&s.attr("src",`static/assets/decks/french2/${t}.jpg`):e.startsWith("static/assets/decks/italian/")?s.attr("src","static/assets/decks/italian/BACK.jpg"):e.startsWith("static/assets/decks/french1/")?s.attr("src","static/assets/decks/french1/BACK.jpg"):e.startsWith("static/assets/decks/french2/")&&s.attr("src","static/assets/decks/french2/BACK.jpg"),a.emit("table",{room:n,html:$("#table").html()})})}}),$("#hand").on("touchstart","h3",function(){t=!0}),$("#hand").on("touchend","h3",function(){t=!1}),$("#shared_notes").click(function(){$("#personal_notes").hide()}),$("#shared_notes").blur(function(){$("#personal_notes").show(),a.emit("notes",{room:n,notes:$("#shared_notes").val()})}),$("#personal_notes").click(function(){$("#shared_notes").hide()}),$("#personal_notes").blur(function(){$("#shared_notes").show()}),$(window).on("orientationchange",function(){0===window.orientation||180===window.orientation?$("#overlay").css("transform",""):$("#overlay").css("transform","scale(0.55)")})})</script></body></html>