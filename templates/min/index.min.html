<!DOCTYPE html><html lang=it><head><meta charset=UTF-8><title>TuttoCarte.it</title><meta name=theme-color content=#1f2324><link rel=manifest href=/app.webmanifest><link rel=icon href=../static/assets/favicon.png><link rel=stylesheet href=../static/css/min/index.min.css><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Gioca con i tuoi amici a qualsiasi gioco di carte senza la necessitÃ  di avere un mazzo a portata di mano!"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Outfit&display=swap"><script src=https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/jquery-ui@1.13.2/dist/jquery-ui.min.js></script><script src=https://cdn.jsdelivr.net/npm/jquery-ui-touch-punch@0.2.3/jquery.ui.touch-punch.min.js></script><script src=https://cdn.jsdelivr.net/npm/socket.io@4.7.2/client-dist/socket.io.min.js></script><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")</script></head><body>{% if dealer == True %}<section id=start><div id=overlay><h1>TuttoCarte.it</h1><h5>FAI SCANNERIZZARE IL QR CODE</h5><img id=qrcode src="https://api.qrserver.com/v1/create-qr-code/?data=TuttoCarte.it/{{room}}" alt=qrcode><h5 id=copy>O CLICCALO PER COPIARE IL LINK</h5><button id=together>INIZIAMO!</button><div id=separator><hr><h6>OPPURE</h6><hr></div><button id=alone>SOLITARIO</button></div></section>{% endif %}<section id=table>{{ html | safe }}</section><section id=hand><h3>MANO</h3><div></div></section><section><textarea id=shared_notes placeholder="Note condivise"></textarea><textarea id=personal_notes placeholder="Note personali"></textarea></section><script type=text/javascript>$(document).ready(function(){var t=!1;const s="{{room}}",o=io({transport:["websocket"]});function e(e){if(event.ctrlKey||!0===t)e.prependTo("#hand div").css({position:"",top:"",left:""}),o.emit("table",{room:s,html:$("#table").html()});else{const n=e.attr("src");o.emit("draw",{room:s,id:e.attr("id")}),o.on("draw",function(t){t=t.card;n.endsWith("BACK.jpg")?n.startsWith("static/assets/decks/italian/")?e.attr("src",`static/assets/decks/italian/${t}.jpg`):n.startsWith("static/assets/decks/french1/")?e.attr("src",`static/assets/decks/french1/${t}.jpg`):n.startsWith("static/assets/decks/french2/")&&e.attr("src",`static/assets/decks/french2/${t}.jpg`):n.startsWith("static/assets/decks/italian/")?e.attr("src","static/assets/decks/italian/BACK.jpg"):n.startsWith("static/assets/decks/french1/")?e.attr("src","static/assets/decks/french1/BACK.jpg"):n.startsWith("static/assets/decks/french2/")&&e.attr("src","static/assets/decks/french2/BACK.jpg"),o.emit("table",{room:s,html:$("#table").html()})})}}o.on("connect",function(){o.emit("join",{room:s})}),$("#qrcode").click(function(){navigator.clipboard.writeText("TuttoCarte.it/"+s),$("#copy").text("COPIATO"),setTimeout(function(){$("#copy").text("O CLICCALO PER COPIARE IL LINK")},2e3)}),$("#together").click(function(){$("#start").remove(),o.emit("table",{room:s,html:$("#table").html()})}),$("#alone").click(function(){$("#start").remove(),$("#shared_notes").remove()}),o.on("table",function(t){$("#table").html(t.html)}),o.on("notes",function(t){$("#shared_notes").val(t.notes)}),$("#table").on("touchstart",".card",function(){$(this).draggable()}),$("#table").on("mouseenter",".card",function(){$(this).draggable({helper:"clone",opacity:.35,revert:!0})}),$("#table").droppable({accept:".card, .fiche",drop:function(t,e){e.helper.remove()}}),$("#table").on("touchend",function(){o.emit("table",{room:s,html:$("#table").html()})}),$("#table").on("mouseup",".card",function(){o.emit("table",{room:s,html:$("#table").html()})}),$("#hand div").on("touchstart",".card",function(){$(this).draggable({containment:"#table"})}),$("#hand div").on("mouseenter",".card",function(){$(this).draggable({containment:"#table"})}),$("#table").on("click",".card",function(){e($(this))}),$("#hand").on("click",".card",function(){e($(this))}),$("#hand h3").on("touchstart",function(){t=!0}),$("#hand h3").on("touchend",function(){t=!1}),$("#shared_notes").click(function(){$("#personal_notes").hide()}),$("#shared_notes").blur(function(){$("#personal_notes").show(),o.emit("notes",{room:s,notes:$("#shared_notes").val()})}),$("#personal_notes").click(function(){$("#shared_notes").hide()}),$("#personal_notes").blur(function(){$("#shared_notes").show()}),$(window).on("orientationchange",function(){0===window.orientation||180===window.orientation?$("#overlay").css("transform",""):$("#overlay").css("transform","scale(0.55)")})})</script></body></html>