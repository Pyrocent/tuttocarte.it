<!DOCTYPE html><html lang=it><head><meta charset=UTF-8><title>TuttoCarte.it</title><link rel=manifest href=manifest.json><meta name=theme-color content=#1f2324><link rel=icon href=../static/assets/favicon.png><link rel=stylesheet href=../static/css/min/index.min.css><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Gioca con i tuoi amici a qualsiasi gioco di carte senza la necessitÃ  di avere un mazzo a portata di mano!"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Alata&family=Outfit&display=swap"><script>navigator.serviceWorker.register("service-worker.js")</script><script src=https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/jquery-ui@1.13.2/dist/jquery-ui.min.js></script><script src=https://cdn.jsdelivr.net/npm/jquery-ui-touch-punch@0.2.3/jquery.ui.touch-punch.min.js></script><script src=https://cdn.jsdelivr.net/npm/fernet@0.4.0/fernetBrowser.min.js></script><script src=https://cdn.jsdelivr.net/npm/socket.io@4.7.2/client-dist/socket.io.min.js></script></head><body>{% if dealer == True %}<section id=start><div id=overlay><h1>TuttoCarte.it</h1><h5>FAI SCANNERIZZARE IL QR CODE</h5><img id=qrcode src="https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=TuttoCarte.it/{{room}}" alt=qrcode><h5 id=copy>O CLICCALO PER COPIARE IL LINK</h5><button>INIZIAMO!</button><div id=separator><hr><h6>OPPURE</h6><hr></div><button>SOLITARIO</button></div></section>{% endif %}<section id=table></section><section id=hand><h3>MANO</h3><div></div></section><section id=notes><textarea id=shared_notes placeholder="Note condivise"></textarea><textarea id=personal_notes placeholder="Note personali"></textarea></section><script type=text/javascript>$(document).ready(function(){var n="",o=!1;const a="{{room}}";var r=io({transport:["websocket"]});function t(t){var s,e;event.ctrlKey||!0===o?t.prependTo("#hand div").css({position:"relative",top:"",left:""}):(s=t.attr("src"),e=new fernet.Token({secret:new fernet.Secret(n),token:t.attr("id")}).decode(),s.endsWith("BACK.jpg")?s.startsWith("static/assets/decks/it/")?t.attr("src",`static/assets/decks/it/${e}.jpg`):s.startsWith("static/assets/decks/fr-b/")?t.attr("src",`static/assets/decks/fr-b/${e}.jpg`):s.startsWith("static/assets/decks/fr-r/")&&t.attr("src",`static/assets/decks/fr-r/${e}.jpg`):s.startsWith("static/assets/decks/it/")?t.attr("src","static/assets/decks/it/BACK.jpg"):s.startsWith("static/assets/decks/fr-b/")?t.attr("src","static/assets/decks/fr-b/BACK.jpg"):s.startsWith("static/assets/decks/fr-r/")&&t.attr("src","static/assets/decks/fr-r/BACK.jpg")),r.emit("table",{room:a,html:$("#table").html()})}r.on("connect",function(){r.emit("join",{room:a})}),r.on("table",function(t){""!=t.key&&""===n&&(n=t.key),$("#table").html(t.html)}),r.on("notes",function(t){$("#shared_notes").val(t.notes)}),$("#qrcode").click(function(){navigator.clipboard.writeText("TuttoCarte.it/"+a),$("#copy").text("COPIATO"),setTimeout(function(){$("#copy").text("O CLICCALO PER COPIARE IL LINK")},2e3)}),$("#start button").click(function(){$("#start").remove(),r.emit("start",{room:a})}),$(document).on("touchstart",".card",function(){$(this).draggable()}),$(document).on("mouseenter",".card",function(){$(this).draggable()}),$("#table").droppable({accept:".card, .fiche",drop:function(t,s){r.emit("table",{room:a,html:$("#table").html()})}}),$("#table").on("click",".card",function(){t($(this))}),$("#hand").on("click",".card",function(){t($(this))}),$("#hand h3").on("touchstart",function(){o=!0}),$("#hand h3").on("touchend",function(){o=!1}),$("#shared_notes").click(function(){$("#personal_notes").hide()}),$("#shared_notes").blur(function(){$("#personal_notes").show(),r.emit("notes",{room:a,notes:$("#shared_notes").val()})}),$("#personal_notes").click(function(){$("#shared_notes").hide()}),$("#personal_notes").blur(function(){$("#shared_notes").show()}),$(window).on("orientationchange",function(){0===window.orientation||180===window.orientation?$("#overlay").css("transform","translate(-50%, -50%)"):$("#overlay").css("transform","translate(-50%, -50%) scale(0.55)")})})</script></body></html>